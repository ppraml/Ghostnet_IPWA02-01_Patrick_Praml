<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head>
  <meta charset="UTF-8">
  <title>Geisternetz melden - PP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:2rem;line-height:1.45}
    nav a{margin-right:1rem;text-decoration:none}
    .card{border:1px solid #ddd;border-radius:8px;padding:1rem;max-width:720px}
    label{display:block;margin-top:.75rem}
    input,select,button{padding:.5rem;border:1px solid #ccc;border-radius:6px;width:100%}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    button{cursor:pointer;margin-top:1rem}
  </style>
</head>
<body>
  <nav><a th:href="@{/}">Home</a></nav>

  <main class="card">
    <h1>Geisternetz melden:</h1>

    <form th:action="@{/report}" method="post" th:object="${reportForm}">
      <!-- CSRF-Token nur wenn vorhanden -->
      <input th:if="${_csrf != null}" type="hidden"
             th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

      <div class="row">
        <div>
          <label for="lat">Breitengrad (lat) *</label>
          <input type="number" step="0.000001" min="-90" max="90" id="lat" th:field="*{lat}" required>
          <div th:if="${#fields.hasErrors('lat')}" th:errors="*{lat}" style="color:#b00"></div>
        </div>
        <div>
          <label for="lon">Längengrad (lon) *</label>
          <input type="number" step="0.000001" min="-180" max="180" id="lon" th:field="*{lon}" required>
          <div th:if="${#fields.hasErrors('lon')}" th:errors="*{lon}" style="color:#b00"></div>
        </div>
      </div>

      <label for="sizeEstimate">Größe</label>
      <select id="sizeEstimate" th:field="*{sizeEstimate}">
        <option value="">– bitte wählen –</option>
        <option value="klein">klein</option>
        <option value="mittel">mittel</option>
        <option value="groß">groß</option>
      </select>
      <div th:if="${#fields.hasErrors('sizeEstimate')}" th:errors="*{sizeEstimate}" style="color:#b00"></div>

      <div class="row">
        <div>
          <label for="reporterName">Name (optional)</label>
          <input type="text" id="reporterName" th:field="*{reporterName}" maxlength="120">
        </div>
        <div>
          <label for="reporterPhone">Telefon (optional)</label>
          <input type="tel" id="reporterPhone" th:field="*{reporterPhone}" maxlength="40" placeholder="+49…">
        </div>
      </div>

      <button type="submit">Meldung senden</button>
    </form>
  </main>
</body>
</html>
